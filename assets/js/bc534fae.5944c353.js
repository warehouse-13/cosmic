"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[124],{3905:(e,t,n)=>{n.d(t,{Zo:()=>p,kt:()=>h});var r=n(7294);function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?o(Object(n),!0).forEach((function(t){a(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function l(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var s=r.createContext({}),u=function(e){var t=r.useContext(s),n=t;return e&&(n="function"==typeof e?e(t):i(i({},t),e)),n},p=function(e){var t=u(e.components);return r.createElement(s.Provider,{value:t},e.children)},d={inlineCode:"code",wrapper:function(e){var t=e.children;return r.createElement(r.Fragment,{},t)}},c=r.forwardRef((function(e,t){var n=e.components,a=e.mdxType,o=e.originalType,s=e.parentName,p=l(e,["components","mdxType","originalType","parentName"]),c=u(n),h=a,m=c["".concat(s,".").concat(h)]||c[h]||d[h]||o;return n?r.createElement(m,i(i({ref:t},p),{},{components:n})):r.createElement(m,i({ref:t},p))}));function h(e,t){var n=arguments,a=t&&t.mdxType;if("string"==typeof e||a){var o=n.length,i=new Array(o);i[0]=c;var l={};for(var s in t)hasOwnProperty.call(t,s)&&(l[s]=t[s]);l.originalType=e,l.mdxType="string"==typeof e?e:a,i[1]=l;for(var u=2;u<o;u++)i[u]=n[u];return r.createElement.apply(null,i)}return r.createElement.apply(null,n)}c.displayName="MDXCreateElement"},4633:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>s,contentTitle:()=>i,default:()=>d,frontMatter:()=>o,metadata:()=>l,toc:()=>u});var r=n(7462),a=(n(7294),n(3905));const o={title:"Prep the boards"},i=void 0,l={unversionedId:"build-guide/board-setup",id:"build-guide/board-setup",title:"Prep the boards",description:"This is the initial setup for Raspberry Pi, regardless of how you are going to use it.",source:"@site/docs/build-guide/board-setup.md",sourceDirName:"build-guide",slug:"/build-guide/board-setup",permalink:"/cosmic/docs/build-guide/board-setup",draft:!1,editUrl:"https://github.com/warehouse-13/cosmic/tree/main/docs/build-guide/board-setup.md",tags:[],version:"current",frontMatter:{title:"Prep the boards"},sidebar:"docs",previous:{title:"Build guide",permalink:"/cosmic/docs/category/build-guide"},next:{title:"Bootstrap the hosts",permalink:"/cosmic/docs/build-guide/host-bootstrapping"}},s={},u=[{value:"Flash the MicroSDs",id:"flash-the-microsds",level:3},{value:"Boot",id:"boot",level:3},{value:"SSH",id:"ssh",level:3},{value:"Optional: add SSH keys",id:"optional-add-ssh-keys",level:4},{value:"Credits",id:"credits",level:3}],p={toc:u};function d(e){let{components:t,...n}=e;return(0,a.kt)("wrapper",(0,r.Z)({},p,n,{components:t,mdxType:"MDXLayout"}),(0,a.kt)("p",null,"This is the initial setup for Raspberry Pi, regardless of how you are going to use it."),(0,a.kt)("h3",{id:"flash-the-microsds"},"Flash the MicroSDs"),(0,a.kt)("p",null,"Follow ",(0,a.kt)("a",{parentName:"p",href:"https://ubuntu.com/tutorials/how-to-sdcard-ubuntu-server-raspberry-pi#1-overview"},"this guide")," to make your microSD cards bootable to Ubuntu.\nChoose either 20.04 or 22.04. If you are using a Model 4B you'll want the 64bit\nimage. I recommend using a ",(0,a.kt)("inlineCode",{parentName:"p"},"Server")," image not a ",(0,a.kt)("inlineCode",{parentName:"p"},"Desktop")," one, unless you want\nto see something nice when you plug your boards into a monitor. With the ",(0,a.kt)("inlineCode",{parentName:"p"},"Server"),"\nimage you wont need a monitor at all and can just directly SSH."),(0,a.kt)("p",null,"BEFORE you click the ",(0,a.kt)("inlineCode",{parentName:"p"},"Write"),' button on the imager, click the cog icon in the bottom\nright hand corner to open the "Advanced options".\nSet the hostname to something useful. I usually go for ',(0,a.kt)("inlineCode",{parentName:"p"},"rp0"),", ",(0,a.kt)("inlineCode",{parentName:"p"},"rp1"),", etc.\nSelect ",(0,a.kt)("inlineCode",{parentName:"p"},"Enable SSH")," and set a username and password.\nClick ",(0,a.kt)("inlineCode",{parentName:"p"},"Save")," then ",(0,a.kt)("inlineCode",{parentName:"p"},"Write"),"."),(0,a.kt)("admonition",{type:"note"},(0,a.kt)("p",{parentName:"admonition"},"If you selected a ",(0,a.kt)("inlineCode",{parentName:"p"},"Desktop")," image, not a server image, SSH may not work right away and you'll\nlikely have to plug in a monitor for your first boot so that you can click some things\nand enable the ssh daemon.")),(0,a.kt)("h3",{id:"boot"},"Boot"),(0,a.kt)("p",null,"Once each card for your boards are flashed, put them into the correct slots under your\nboards and power them up."),(0,a.kt)("h3",{id:"ssh"},"SSH"),(0,a.kt)("p",null,'Attach an ethernet cable to each board. Open a terminal on your main PC/Laptop,\nmake sure it is connected to the same network. (I will call this machine the\n"admin" one from now on.)'),(0,a.kt)("p",null,"Discover which internal LAN IPs your boards are running on. You can do this by one of the following methods:"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},"Looking at your router DHCP leases"),(0,a.kt)("li",{parentName:"ul"},"Plugging the boards back into the monitor, opening a terminal and running ",(0,a.kt)("inlineCode",{parentName:"li"},"hostname -I"),"\n(it will likely be the first one), and making a note of it"),(0,a.kt)("li",{parentName:"ul"},"Running ",(0,a.kt)("inlineCode",{parentName:"li"},'arp -na | grep -i  "b8:27:eb\\|dc:a6:32\\|e4:5f:01"')," in your admin machine.\nAny board addresses will be listed at the start of each line. ",(0,a.kt)("em",{parentName:"li"},"Note: if you are connected\nto both wifi and ethernet you may get back 2 addresses per board, either will do."))),(0,a.kt)("p",null,"Open a new terminal session window per board. I like to use ",(0,a.kt)("a",{parentName:"p",href:"https://github.com/tmux/tmux"},(0,a.kt)("inlineCode",{parentName:"a"},"tmux"))," (my config is ",(0,a.kt)("a",{parentName:"p",href:"https://gist.github.com/Callisto13/b4cc217ca4f1c2f7f51405d62b941adb"},"here"),")."),(0,a.kt)("p",null,"SSH into each board:"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-bash"},"ssh <username>@<ip address>\n")),(0,a.kt)("p",null,"Enter the password you set up and you should be in."),(0,a.kt)("h4",{id:"optional-add-ssh-keys"},"Optional: add SSH keys"),(0,a.kt)("p",null,"If you already have a keypair handy, copy the public half into a buffer."),(0,a.kt)("p",null,"If you don't have one already you can generate a new one.\nOn your admin machine, generate an SSH key pair:"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-bash"},"ssh-keygen -t ed25519\n")),(0,a.kt)("p",null,"Copy the contents of the PUBLIC key file. If you ran the command with defaults\nthis will be at ",(0,a.kt)("inlineCode",{parentName:"p"},"~/.ssh/id_rsa.pub"),"."),(0,a.kt)("p",null,"On each board, paste the public key into ",(0,a.kt)("inlineCode",{parentName:"p"},"~/.ssh/authorized_keys"),"."),(0,a.kt)("p",null,"Next time you SSH you can skip typing in a password with the following flag:"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-bash"},"ssh -i <path to PRIVATE key file> <username>@<ip address>\n")),(0,a.kt)("h3",{id:"credits"},"Credits"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("a",{parentName:"li",href:"https://ubuntu.com/tutorials/how-to-sdcard-ubuntu-server-raspberry-pi#1-overview"},"How to create an Ubuntu Server SDcard for Raspberry Pi")),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("a",{parentName:"li",href:"https://ubuntu.com/tutorials/how-to-install-ubuntu-on-your-raspberry-pi#1-overview"},"How to install Ubuntu Server on your Raspberry Pi"))))}d.isMDXComponent=!0}}]);